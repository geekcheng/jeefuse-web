Date.prototype.isLeapYear=function(){return(0==this.getYear()%4&&((this.getYear()%100!=0)||(this.getYear()%400==0)))};Date.prototype.FormatString=function(b){var c=b;var a=["日","一","二","三","四","五","六"];c=c.replace(/yyyy|YYYY/,this.getFullYear());c=c.replace(/yy|YY/,(this.getYear()%100)>9?(this.getYear()%100).toString():"0"+(this.getYear()%100));c=c.replace(/MM/,this.getMonth()>9?this.getMonth().toString():"0"+this.getMonth());c=c.replace(/M/g,this.getMonth());c=c.replace(/w|W/g,a[this.getDay()]);c=c.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate());c=c.replace(/d|D/g,this.getDate());c=c.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours());c=c.replace(/h|H/g,this.getHours());c=c.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes());c=c.replace(/m/g,this.getMinutes());c=c.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds());c=c.replace(/s|S/g,this.getSeconds());return c};function daysBetween(g,c){var f=g.substring(5,g.lastIndexOf("-"));var b=g.substring(g.length,g.lastIndexOf("-")+1);var i=g.substring(0,g.indexOf("-"));var h=c.substring(5,c.lastIndexOf("-"));var d=c.substring(c.length,c.lastIndexOf("-")+1);var e=c.substring(0,c.indexOf("-"));var a=((Date.parse(f+"/"+b+"/"+i)-Date.parse(h+"/"+d+"/"+e))/86400000);return Math.abs(a)}Date.prototype.DateAdd=function(b,a){var c=this;switch(b){case"s":return new Date(Date.parse(c)+(1000*a));case"n":return new Date(Date.parse(c)+(60000*a));case"h":return new Date(Date.parse(c)+(3600000*a));case"d":return new Date(Date.parse(c)+(86400000*a));case"w":return new Date(Date.parse(c)+((86400000*7)*a));case"q":return new Date(c.getFullYear(),(c.getMonth())+a*3,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case"m":return new Date(c.getFullYear(),(c.getMonth())+a,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case"y":return new Date((c.getFullYear()+a),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())}};Date.prototype.DateDiff=function(a,b){var c=this;if(typeof b=="string"){b=StringToDate(b)}switch(a){case"s":return parseInt((b-c)/1000);case"n":return parseInt((b-c)/60000);case"h":return parseInt((b-c)/3600000);case"d":return parseInt((b-c)/86400000);case"w":return parseInt((b-c)/(86400000*7));case"m":return(b.getMonth()+1)+((b.getFullYear()-c.getFullYear())*12)-(c.getMonth()+1);case"y":return b.getFullYear()-c.getFullYear()}};Date.prototype.pattern=function(a){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};var c={"0":"\u65e5","1":"\u4e00","2":"\u4e8c","3":"\u4e09","4":"\u56db","5":"\u4e94","6":"\u516d"};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}if(/(E+)/.test(a)){a=a.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"\u661f\u671f":"\u5468"):"")+c[this.getDay()+""])}for(var b in d){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(d[b]):(("00"+d[b]).substr((""+d[b]).length)))}}return a};